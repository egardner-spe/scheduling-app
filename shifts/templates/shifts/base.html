<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shiftwise</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS (keep this as-is) -->
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />

    <!-- FullCalendar CSS -->
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css"
    />
</head>

<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light mb-4 shadow-sm">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="{% url 'dashboard' %}">Shiftwise</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">

                {% if user.is_authenticated %}
                <li class="nav-item"><a class="nav-link" href="{% url 'dashboard' %}">Dashboard</a></li>
                {% if user.is_staff %}
                <li class="nav-item"><a class="nav-link" href="{% url 'approve_shifts_pickup' %}">Approve Pickups</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'admin_time_off_list' %}">Approve Time Off</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'view_shift_schedule' %}">All Schedules</a></li>
                {% endif %}
                <li class="nav-item">
                    <form method="post" action="{% url 'logout' %}" class="d-inline">
                        {% csrf_token %}
                        <button type="submit" class="btn nav-link px-2">Logout</button>
                    </form>
                </li>
                {% else %}
                <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Login</a></li>
                <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Register</a></li>
                {% endif %}

            </ul>
        </div>
    </div>
</nav>


<div class="container">
        {% block content %}
        {% endblock %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let calendarEl = document.getElementById('calendar');
            let calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridWeek',
                views: {
                    dayGridWeek: {
                        titleFormat: { month: 'short', day: 'numeric' }, // “Jul 13” style
                        dayHeaders: true
                    }
                }
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: ''
                },
                allDaySlot: false,
                slotMinTime: '06:00:00',
                slotMaxTime: '22:00:00',
                nowIndicator: true,
                events: '{% url "api_shifts" %}',
                height: 600
            });
            calendar.render();
        });
    </script>
</body>
</html>
